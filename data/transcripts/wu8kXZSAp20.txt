 The following content is provided under a Creative Commons license. Your support will help MIT OpenCourseWare continue to offer high quality educational resources for free. To make a donation or to view additional materials from hundreds of MIT courses, visit MIT OpenCourseWare at ocw.mit.edu. Remember we left things with the statement of the divergence theorem. The divergence theorem gives us a way to compute the flux of a vector field for a closed surface. It says if I have a closed surface S bounding some region D, and I have a vector field defined in space, then I can try to compute the flux of my vector field for my surface, double integral of F dot dS, or F dot n dS if you want. And, to set this up, of course, I need to use, well, the geometry of the surface. Depending on what the surface is, we have seen various formulas for how to set up the double integral. We have also seen that if it is a closed surface, and if a vector field is defined everywhere inside, then we can actually reduce that to a calculation of the triple integral of the divergence of F inside. Concretely, if I use coordinates, let's say that the components are P, Q and R dot n dS, then that will become the triple integral of, well, so divergence is P sub x plus Q sub y plus R sub z. By the way, how to remember this formula for divergence and for other things as well. Let me just tell you quickly about the del notation. This guy is usually pronounced as del rather than as a pointy triangle going downwards or something like that. It is a symbolic notation for divergence. You are probably going to complain about my putting these guys into a vector, but let's think of partial with respect to x, with respect to y and with respect to z as the components of some formal vector. Of course, it is not a real vector. These are not like anything. These are just symbols. See, for example, the gradient of a function, well, if you multiply this vector by a scalar, which is a function, then you will get partial partial x of F, partial partial y of F, partial partial z of F. Well, that is the gradient. That seems to work. And, so now the interesting thing about divergence is I can just write it as del dot a vector field. See, if I do the dot product between this guy and my vector field PQR, well, it looks like I will indeed get partial partial x of P plus partial Q partial y plus partial r partial z. That is the divergence. And, of course, similarly, when we had two variables only, x and y, we could have thought of the same notation just with a two component vector, partial partial x, partial partial y. Now, this is like slightly limited usefulness so far. It is going to become very useful pretty soon because we are going to see curl. And, the formula for curl in the plane was kind of complicated. But, if you thought about it in terms of this, it was actually the determinant of del and F. And now, in space, we are actually going to do del cross F. But, I am getting ahead of things. So, let's not do anything with that. Curl will be for next week. Just getting you used to the notation, especially since you might be using it in physics already, so it might be worth doing. OK, so the other thing I wanted to say is what does this theorem say physically? How should I think of this statement? I think I said that very quickly at the end of last time, but not very carefully. So, what's the physical interpretation of the divergence theorem? So, I want to claim that the divergence of a vector field corresponds to what I am going to call the source rate, which is somehow the amount of gas per unit volume. So, to understand what that means, let's think of what's called an incompressible fluid. OK, so an incompressible fluid is something like water, for example, where a fixed mass of it always occupies the same amount of volume. OK, so gases are compressible. Liquids are incompressible, basically. So, if you have an incompressible fluid flow, well, so, again, what that means is really given mass occupies always a fixed mass. Then, well, let's say that we have such a flow with velocity given by our vector field, F. OK, so we are thinking of F as the velocity in maybe something like a pipe or something. So, what does the divergence theorem say? It says that if I take a region in space, let's call it D, sorry, D is the inside and S is the surface around it, well, so if I sum the divergence in D, then I'm going to get the flux going out through this surface, S. I should have mentioned it earlier. The convention in the divergence theorem is that we orient the surface with a normal vector pointing always outward. OK, so now we know what flux means. Remember, we've been describing flux means how much fluid is passing through this surface. So, that's the amount of fluid that's leaving the region D per unit time. And, of course, when I'm saying that, it means I'm counting everything that's going out of D minus everything that's coming into D. That's what the flux measures. So, now, if there's stuff coming into D or going out of D, well, it must come from somewhere. So, one possibility would be that your fluid is actually being compressed or expanded. But, I've said, no, I'm looking at something like water that you cannot squish into smaller volume. So, that gives you an explanation is that there's something in here that actually is sucking up water or producing more water. And so, integrating the divergence gives you the total amount of sources minus the amount of sinks that are inside this region. So, the divergence itself measures basically the amount of sources or sinks per unit volume in a given place. And now, if you think about it that way, well, so basically the divergence theorem is just stating something completely obvious about all the matter that is leaving this region must come from somewhere. So, that's basically how we think about it. Now, of course, if you're doing 8.02, then you might actually have seen the divergence theorem already being used for things that are more like force fields, say electric fields and so on. Well, I'll try to say a few things about that during the last week of classes, but then this kind of interpretation doesn't quite work. OK, any questions, generally speaking, before we move on to the proof and other applications? Yes? Oh, not the gradient. So, the divergence of F measures the amount of sources or sinks in there. Well, what makes it happen if you want, in a way, it's this theorem. Or, in another way, if you think about it, try to look at your favorite vector fields and compute their divergence. And, if you take a vector field where maybe everything is rotating, a flow that's just rotating about some axis, then you'll find that its divergence is zero. If you, sorry? No, divergence is not equal to the gradient. Sorry, there's a dot here that maybe is not very big, but it's very important. OK, so you take the divergence of a vector field while you take the gradient of a function. So, the gradient of a function is a vector. The divergence of a vector field is a function. So, somehow these guys go back and forth between. So, I should have said, with new notations comes new responsibility. I mean, now that we have this nice nifty notation that will let us do gradient, divergence, and later curl in a unified way, if you choose to use this notation, you have to be really, really careful what you put after it because otherwise it's easy to get completely confused. OK, so divergence and gradient are completely different things. The only thing they have in common is that both are what's called a first order differential operator. It involves the first partial derivatives of whatever you put into it. But, one of them goes from functions to vectors. That's gradient. The other one goes from vectors to functions. That's divergence. And, curl later will go from vectors to vectors, but that will be later. OK, let's see, more questions? No, OK, so let's see. So, how are we going to actually prove this theorem? Well, if you remember how we proved Green's theorem a while ago, the answer is we're going to prove it exactly the same way. Now, if you don't remember, then I'm going to explain. OK, so the first thing we need to do is actually a simplification. So, instead of proving the divergence theorem, namely this equality up there, I'm going to actually prove something easier. I'm going to prove that the flux of a vector field that has only one component is actually equal to the triple integral of, well, the divergence of this is just R sub z dV. OK, now, how do I go back to the general case? Well, I will just prove the same thing for a vector field that has only an x component or only a y component. And then, I will add these things together. So, if you think carefully about what happens when you simplify this, you'll have some formula for n dS. And, when you do the dot product, you'll end up with a sum, P times something plus Q times something plus R times something. And basically, we are just dealing with the last term, R times something, and showing that it's equal to what it should be. And then, with three such terms together, we'll get the general case. OK, so then we get the general case by summing one such identity for each component. I should say three such identities, one for each component. OK, now, let's make a second simplification because I'm still not feeling confident that I can prove this right away for any surface. I'm going to do it first for what's called a vertically simple region. OK, so vertically simple means it will be something on which I can set up an integral of a z variable first easily. So, it's something that has a bottom face and a top face, and then some vertical sides. OK, so let's look first at what happens if the given region, D, is vertically simple. So, vertically simple means it looks like this. It has a top. It has a bottom. And, it has some vertical sides. So, if you want, if I look at it from above, it projects to some region in the top, let's call that R, and it lives between the top face and the bottom face. Let's say the top face is z equals z2 of x, y. The bottom face is z equals z1 of x, y. And, I don't need to know actual formulas. I'm just going to work with these and prove things independently of what the formulas will be for these functions. OK, so anyway, a graphically simple region is something that lives above part of the x, y plane, and is between two graphs of two functions. So, let's see what we can do in that case. OK, so the right-hand side of this equality, so that's the triple integral. Let's start computing it. OK, so of course we will not be able to get a number out of it because we don't know, actually, formulas for anything. But, at least we can start simplifying because the way this region looks like, say this is d, tells me that I can start setting up the triple integral at least in the order where I integrate first over z. OK, so I can actually do it as a triple integral of Rz dz dx dy, or dy dx, doesn't matter. So, what are the bounds on z? See, this is actually good practice to remember how we set up triple integrals. So, remember when we integrate first over z, we start by fixing a point x and y. And, for that value of x and y, we look at a small vertical slice and see from where to where we have to go. Well, we start at z equals whatever the value is at the bottom, so z1 of x and y. And, we go up to the top face, z2 of x and y. Now, for x and y, I'm not going to actually set up a triple integral. Oh, sorry. I've already called R the quantity that I'm integrating. So, let me change this to, say, u or something like that. If you already have an R, I mean, there's not much risk for confusion, but still. OK, so I'm going to call u the shadow of my region instead. So, now I want to integrate over all values of x and y that are in the shadow of my region. That means it's a double integral over this region, u, which I haven't described to you, so I can't actually set a bounce for x and y. But, I'm going to just leave it like this. OK, now, you see, if you look at how you would start evaluating this, well, the inner integral certainly is not scary because you're integrating the derivative of R with respect to z, integrating that with respect to z. So, you should get R back. OK, so triple integral over d of Rz dv becomes, well, we'll have a double integral over u of, so the inner integral becomes R at the point on the top. So, that means, remember, R is a function of x, y, and z. And, in fact, I will plug into it the value of z at the top, so z2 of x, y minus the value of R at the point on the bottom, x, y, z1 of x, y. OK, any questions about this? Is it looking vaguely believable? Yeah, OK. So, now, let's compute the other side because here we are stuck. We won't be able to do anything else. So, let's look at the flux integral. OK, we have to look at the flux of this vector field through the entire surface, S, which is the whole boundary of D. So, that consists of a lot of pieces, namely the top, the bottom, and the sides. OK, so the other side. So, let me just remind you, S is bottom plus top plus sides of this vector field dot n dS equals, OK, so what do we have? So, first we have to look at the bottom. Now, let's start with the top, actually. Sorry. OK, so let's start with the top. So, just to remind you, well, OK, let's do all of them. So, let's look at the top first. So, we need to set up the flux integral for vector field dot n dS. We need to know what n dS is. Well, fortunately for us, we know that the top face is going to be the graph of some function of x and y. So, we've seen a formula for n dS in this kind of situation. OK, we've seen that n dS, sorry, just to remind you, this is the graph of a function, z equals z2 of x, y. So, we've seen n dS for that is negative partial derivative of this function with respect to x, negative partial z2 with respect to y, one dx dy. And, well, we can't compute these guys, but it's not a big deal because if we do the dot vector field dot n dS, that will give us, well, if you dot this with zero, zero, r, these terms go away. You just have r dx dy. So, that means that the double integral for flux for the top of the dot vector field dot n dS becomes double integral over the top of r dx dy. And now, how do we evaluate that, actually? Well, so, r is a function of x, y, z. But, we said we have only two variables that we're going to use. We're going to use x and y. We're going to get rid of z. How do we get rid of z? Well, if we're on the top of the dot vector field, we know that z is given by this formula, z2 of x, y. So, I plug z equals z2 of x, y into the formula for r, whatever it may be. Then, I integrate dx dy. And, what's the range for x and y? Well, my surface sits exactly above this region, u, in the x, y plane. So, it's a double integral over u. Any questions about how I set up this flux integral? No? OK, let me close the doors, actually. OK, so, we've got one of the two terms that we had over there. Let's try to get the others. So, no comment. OK, so, we need to look also at the other parts of our surface for the flux integral. So, the bottom, well, it will work pretty much the same way, right, because it's the graph of a function, z equals z1 of x, y. So, we should be able to get N dS using the same method, negative partial with respect to x1 dx dy. Now, there's a small catch. OK, we have to think a bit carefully about orientations. So, remember, when we set up the divergence theorem, we need the normal vectors to point out of our region, which means that on the top surface, we want N pointing up. But, on the bottom face, we want N pointing down. So, in fact, we shouldn't use this formula here because that one corresponds to the other orientation. Well, we could use it and then subtract. But, I'm just going to say that N dx is actually the opposite of this. So, I'm going to switch all my sides. OK, that's the other side of the formula when you orient your graph with N pointing downwards. Now, if I do things the same way as before, I will get that 0, 0, r dot N dS will be negative r dx dy. And so, when I do the double integral over the bottom, I'm going to get the double integral over the bottom of negative r dx dy, which, if I try to evaluate that, well, I actually will have to integrate, sorry, first I will have to substitute the value of z. The value of z that I will want to plug into r will be given by, now, z1 of x, y. And, the bounds of integration will be given, again, by the shadow of our surface, which is, again, this guy, u. OK, so we seem to be all set, except we're still missing one part of our surface S because we also need to look at the sides. Well, what about the sides? Well, our vector field, 0, 0, r, is actually vertical. It's parallel to the z axis. OK, so my vector field does something like this everywhere. And, while that makes it very interesting on the top and bottom, that means that on the sides, really, not much is going on. All right, no matter is passing through the vertical sides. So, the sides, the sides are vertical. So, 0, 0, r is tangent to the side. And, therefore, the flux for the sides is just going to be zero. OK, no calculation needed. That's because, of course, that's the reason why I simplified first things so that my vector field would only have a z component. Well, not just that, but that's the main place where it becomes very useful. So, now, if I compare my triple integral and my flux integral, I get that they are indeed the same. Well, that's a statement of a theorem we're trying to prove. I should not erase it. OK, so just to recap, we got a formula for the triple integral of r sub z dv. It's up there at the very top. And, we got formulas for the flux for the top and the bottom and the sides. And, when you add them together, you get, indeed, the same formula, top plus bottom plus sides of, OK, and so we have actually completed the proof for this part. Now, well, that's only for a vertically simple region. So, if d is not vertically simple, what do we do? Well, we cut it into vertically simple pieces. OK, so concretely, say that I wanted to integrate over a solid donut, then that's not vertically simple because here in the middle I have not only this top and this bottom, but I have like this middle face. So, the way I would cut my donut would be probably, I would slice it, no, not in the way that you would usually slice a donut or a bagel, but, I mean, it's probably more spectacular if you think of it as a bagel. Then, the mathematicians' way of slicing it is like this into five pieces, OK? And, that's not very convenient for eating, but that's convenient for integrating over it because now each of these pieces has a well-defined top and bottom face. And, of course, you've introduced some vertical sides. But, we don't really care about the vertical sides for two reasons. One is that we've said the flux through them is zero anyway, so who cares? But, also, if you sum the flux through the surface of each little piece, well, you see that you will be integrating twice over each of these vertical cuts. Once, when you do this piece, you'll be taking the flux through this red guy with normal vector pointing to the right. And, once, when you take this middle little piece, you'll be taking the flux through that cut surface again, but now with normal vector pointing the other way around. So, in fact, you'll be summing the flux through these guys twice with opposite orientations. Well, and again, because of what we were doing, actually, the integral was just zero anyway, so it didn't matter. But, even if it hadn't simplified, that would do it for us. OK, so that's how we do it with a general region. And then, as I say at the beginning, when we can do it for a vector field that has only a z component, well, we can also do it for a vector field that has only an x or only a y component. And then, we sum together, and we get the general case. So, that's the end of the proof. OK, so, you see, the idea is really the same as for Green's theorem. Yes? Oh, there's only four pieces. Thank you. Yes, there's three kinds of mathematicians, those who know how to count and those who don't. Well, OK. So, OK, now, so I hope that you can see already the interest of this theorem, the divergence theorem, for computing flux integrals, just for the sake of computing flux integrals, like might happen on the problem set or on the next test. But, let me tell you also why it's important physically to understand equations that had been observed empirically well before they were actually understood in terms of how the fluid goes. So, let's look at something called the diffusion equation. So, let me explain to you what it does. So, the diffusion equation is something that governs, well, what's called diffusion. Diffusion is when you have a fluid in which you're introducing some substance, and you want to figure out how that thing is going to spread out, the technical term is diffuse, into the ambient fluid. So, for example, that governs the motion of, say, smoke in the air. Or, if you put dye in a solution, or things like that, that will tell you, say that you actually drop some ink into a glass of water, well, you can imagine that obviously it will get diluted into there. And, that equation will tell you how exactly over time this thing is going to spread out and start filling the entire glass. So, what's the equation? Well, we need first to tell what the unknown will be. So, it's a partial differential equation. OK, so the unknown is a function, and the equation will relate the partial derivatives of that function to each other. So, u, the unknown, will be the concentration at a given point. And, of course, that depends on the point where you are. So, that depends on x, y, z, the location where you are. But, since the goal is to also understand how things spread over time, it should also depend on time. Otherwise, we are not going to get very far. And, in fact, what the equation will give us is the derivative of u with respect to t. It will tell us how the concentration at a given point varies over time in terms of how the concentration varied in space. So, it will relate partial u, partial t to partial derivatives with respect to x, y, z, and z. OK, so what's the equation? The equation is partial u partial t equals some constant. Let me call that constant k times something I will call del squared u, which is also called the Laplacian of u. And, what is that? Well, that means, OK, so just to scare you, del squared is this, which means it's the divergence of gradient u that we've used this notation for gradient. OK, so if you actually expand it in terms of the variables, that becomes partial u over partial x squared plus partial squared u over partial y squared plus partial squared u over partial z squared. OK, so the equation is this equals that. OK, so that's a weird looking equation. And, I'm going to have to explain to you where does it come from. OK, but before I do that, I mean, well, let me point out, actually, that this equation is not just the diffusion equation. It's also known as the heat equation. And, that's because exactly the same equation governs how temperature changes over time when you have, again, so I should have been actually more careful. I should have said this is in air that's not moving, OK, and same thing with a solution. You know, if you drop some ink into your glass of water, well, if you start stirring, obviously, it will mix much faster than if you don't do anything. OK, so that's the case where we don't actually, the fluid is not moving. And, the heat equation now does the same, but for temperature in a fluid that's at rest that's not moving, it tells you how the heat goes from the warmest parts to the coldest parts. And, eventually, temperatures should somehow even out. So, in the heat equation, that would just be, this U would just measure the temperature for the temperature of your fluid at a given point. Actually, it doesn't have to be a fluid. It can just be a solid for a heat equation. So, for example, say that you have a big box made of metal or something, and you do some heating at one side. You want to know how quickly is the other side going to get hot. Well, you can use the equation to figure out, say that you have a metal bar, and you keep one side at, I don't know, 400 degrees because it's in your oven. How quickly will the other side get warm? OK, so it's the same equation for both phenomena, even for the, of course, different phenomena. Well, the physical reason why they are the same is actually that phenomena are different, but not all that much. They involve actually how the atoms and molecules are actually moving and hitting each other inside this medium. OK, so anyway, what's the explanation for this? So, to understand the explanation, and given what we've been doing, we should have a vector field in there. So, I'm going to think of the flow of, well, let's imagine that we're doing motion of smoke in air. So, that's the flow of a smoke. That means, at every point, it's a vector whose direction is in which direction the smoke is actually moving. And, its magnitude tells me how fast it's moving, and also what amount of smoke is moving. So, there's two things to understand. One is how the disparities in the concentration between different points cause the flow to be there. How smoke will flow from the regions where there's more smoke to the regions where there's less smoke. And, that's actually physics. But, in a way, it's also common sense. So, physics and common sense theory tell us that the smoke will flow from high concentration towards low concentration regions. OK, so if we think of this function, u, that measures concentration, that means we are always going to go in the direction where the concentration decreases the fastest. Well, what's that? That's negative the gradient. So, F is directed along minus gradient u. Now, how big is F going to be? Well, there you have to come up with some intuition for how the two are related. And, the easiest relation you can think of is that they might be just proportional. So, the steeper the differences in concentration, the faster the flow will be, or the more there will be flow. And, if you try to think about it as molecules moving in random directions, you will see it makes actually complete sense. But, anyway, it should be part of your physics class, not part of what I'm telling you. So, I'm just going to accept that the flow is just proportional to the gradient of u. So, if the differences between concentrations at different points are very small, then the flow will be very gentle. And, if on the other hand, you have huge disparities, then things will try to even out faster. OK, so that's the first part. Now, we need to understand the second part, which is, once we know how the flow is going, how does that affect the concentration? If smoke is going that way, then it means the concentration here should be decreasing, and there it should be increasing. So, that's the relation between partial u, partial f, and partial u, partial t. And, that part is actually math, namely the divergence theorem. So, let's try to understand this. So, let's take a small region in space, D, bounded by a surface, S. OK, so I want to figure out what's going on in here. So, let's look at the flux out of this. Well, we said that this flux would be given by double integral on S of F dot n dS. So, this flux measures how much smoke is passing through S per unit time. That's the amount of smoke through S per unit time. But now, how can I compute that differently? Well, I can compute it just by looking at the total amount of smoke in this region and seeing how much it changes. If I'm gaining or losing smoke, it means it must be going out there. Well, unless I have a smoker in here, but that's not part of the data. So, that should be, sorry, that's the same thing as the derivative with respect to T of the total amount of smoke in the region, which is given by the triple integral of u. If I integrate the concentration of smoke, which means the amount of smoke per unit volume over D, I will get the total amount of smoke in D. Except, well, let's see. This flux is counted positively if we go out of D. So, actually, it's minus the derivative. This is the amount of smoke that we are losing per unit volume. OK, so now we are almost there. Well, let me actually, because we know yet another way to compute this guy using the divergence theorem, right? So, this part here is just like common sense and thinking about what it means. The divergence theorem tells me this is also equal to the triple integral, D, of dF dV. So, what I got is that the triple integral over D of dF dV equals this derivative. Well, let's think a bit about this derivative. So, see, you're integrating a function of x, y, and z, and then you're differentiating with respect to T. I claim that you can actually switch the order in which you do things. So, when we think about it, here you're taking the total amount of smoke and then seeing how that changes over time. So, you're taking the derivative of the sum of all the small amounts of smoke everywhere. Well, that would be the sum of the derivatives of the amounts of smoke inside each little box. So, we can actually move the derivative into the integral. Let's see, I said minus d dt, triple integral over d u dV. And, now I'm saying this is the same as the triple integral in D of du dt dV. And, the reason why this is going to work is you should think of it as d dt of a sum of values, you plug in the values of your points at that given time, times the small volume. You sum them, and then you take the derivative. And now you see the derivative of this sum is the sum of the values of x, y, z, i, t. So, if you think about what the integral measures, that's actually pretty easy. And, it's because this variable here is not the same as the variables on which we're integrating. That's why we can do it. OK, so now, if we have this for any region D, so we have a function of x, y, z, t, and we have another function here. And, whenever we integrate them anywhere, we get the same answer. Well, that must mean they're the same, right? Just think of what happens if you just take D to be a tiny little box. You'll get roughly the value of d at that point times the volume of the box. Or, you'll get roughly the value of d u dt at that point times the volume of the little box. So, the values must be the same. Well, let me actually explain that a tiny bit better. So, what I get is that one of our, let me divide by the volume of D. Sorry, I promise I'm done in a minute, is the same thing as one of our volume D of negative t dV. So, that means the average value, OK, maybe that's the best way of explaining it, the average of dF in D is equal to the average of minus partial u partial t in D. And, that's true for any region D, not just for some regions, but for really any region I can think of. So, the outcome is that eventually the divergence of F is equal to minus d u dt. And, that's another way to think about what divergence means. The divergence, we say, is how much stuff is actually expanding, flowing out. That's how much we are losing. And so, now, if you combine this with that, you'll get that d u dt is minus divergence F, plus k del squared u. OK, so you combine this guy with that guy, and you get the diffusion equation.